!function(e){"use strict";function n(){}function r(e){return function(){return e}}function t(){return a}var o,i=function(e){function n(){return r}var r=e;return{get:n,set:function(e){r=e},clone:function(){return i(n())}}},u=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=r(!1),s=r(!0),a=(o={fold:function(e,n){return e()},is:c,isSome:c,isNone:s,getOr:d,getOrThunk:l,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:d,orThunk:l,map:t,each:n,bind:t,exists:c,forall:s,filter:t,equals:f,equals_:f,toArray:function(){return[]},toString:r("none()")},Object.freeze&&Object.freeze(o),o);function f(e){return e.isNone()}function l(e){return e()}function d(e){return e}function m(e){return function(n){return function(e){if(null===e)return"null";var n=typeof e;return"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}}function v(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t}function h(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function g(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r}function p(e,n){return-1!==e.indexOf(n)}function w(e){return void 0!==e.style&&H(e.style.getPropertyValue)}function y(n,r,t){!function(n,r,t){if(!(P(t)||I(t)||W(t)))throw e.console.error("Invalid call to Attr.set. Key ",r,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(r,t+"")}(n.dom(),r,t)}function S(e,n){var r=e.dom().getAttribute(n);return null===r?void 0:r}function E(e,n){e.dom().removeAttribute(n)}function O(e,n){return function(){return n===e}}function N(e,n){return function(){return n===e}}function T(e,n){var r=String(n).toLowerCase();return function(e,n){for(var r=0,t=e.length;r<t;r++){var o=e[r];if(n(o))return L.some(o)}return L.none()}(e,(function(e){return e.search(r)}))}function x(e){return function(n){return p(n,e)}}function b(){return me.get()}function C(e,n){var r=e.dom();if(r.nodeType!==ve)return!1;var t=r;if(void 0!==t.matches)return t.matches(n);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function A(e,n,t,o){return{x:r(e),y:r(n),width:r(t),height:r(o),right:r(e+t),bottom:r(n+o)}}function D(e,n){return function(r){function t(e){return r.setActive(e.state)}return r.setActive(null!==n.get()),e.on("FullscreenStateChanged",t),function(){return e.off("FullscreenStateChanged",t)}}}var M,F,_,R=function(e){function n(){return i}function t(n){return n(e)}var o=r(e),i={fold:function(n,r){return r(e)},is:function(n){return e===n},isSome:s,isNone:c,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:n,orThunk:n,map:function(n){return R(n(e))},each:function(n){n(e)},bind:t,exists:t,forall:t,filter:function(n){return n(e)?i:a},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(n){return n.is(e)},equals_:function(n,r){return n.fold(c,(function(n){return r(e,n)}))}};return i},L={some:R,none:t,from:function(e){return null==e?a:R(e)}},P=m("string"),k=m("array"),I=m("boolean"),H=m("function"),W=m("number"),U=(Array.prototype.slice,Array.prototype.push),V=(H(Array.from)&&Array.from,Object.keys),j=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:r(e)}},B={fromHtml:function(n,r){var t=(r||e.document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw e.console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return j(t.childNodes[0])},fromTag:function(n,r){var t=(r||e.document).createElement(n);return j(t)},fromText:function(n,r){var t=(r||e.document).createTextNode(n);return j(t)},fromDom:j,fromPoint:function(e,n,r){var t=e.dom();return L.from(t.elementFromPoint(n,r)).map(j)}},q=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),z=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),X=e.Node.TEXT_NODE,Y=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")(),M=X,function(e){return function(e){return e.dom().nodeType}(e)===M}),G=function(){return $(0,0)},$=function(e,n){return{major:e,minor:n}},K=function(e,n){var r=String(n).toLowerCase();return 0===e.length?G():function(e,n){var r=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}}(e,n);if(!r)return{major:0,minor:0};function t(e){return Number(n.replace(r,"$"+e))}return $(t(1),t(2))}(e,r)},J=G,Q="Firefox",Z=function(e){var n=e.current;return{current:n,version:e.version,isEdge:O("Edge",n),isChrome:O("Chrome",n),isIE:O("IE",n),isOpera:O("Opera",n),isFirefox:O(Q,n),isSafari:O("Safari",n)}},ee=function(){return Z({current:void 0,version:J()})},ne=Z,re=(r("Edge"),r("Chrome"),r("IE"),r("Opera"),r(Q),r("Safari"),"Windows"),te="Android",oe="Solaris",ie="FreeBSD",ue=function(e){var n=e.current;return{current:n,version:e.version,isWindows:N(re,n),isiOS:N("iOS",n),isAndroid:N(te,n),isOSX:N("OSX",n),isLinux:N("Linux",n),isSolaris:N(oe,n),isFreeBSD:N(ie,n)}},ce=function(){return ue({current:void 0,version:J()})},se=ue,ae=(r(re),r("iOS"),r(te),r("Linux"),r("OSX"),r(oe),r(ie),/.*?version\/\ ?([0-9]+)\.([0-9]+).*/),fe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return p(e,"edge/")&&p(e,"chrome")&&p(e,"safari")&&p(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ae],search:function(e){return p(e,"chrome")&&!p(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return p(e,"msie")||p(e,"trident")}},{name:"Opera",versionRegexes:[ae,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:x("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:x("firefox")},{name:"Safari",versionRegexes:[ae,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(p(e,"safari")||p(e,"mobile/"))&&p(e,"applewebkit")}}],le=[{name:"Windows",search:x("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return p(e,"iphone")||p(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:x("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:x("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:x("linux"),versionRegexes:[]},{name:"Solaris",search:x("sunos"),versionRegexes:[]},{name:"FreeBSD",search:x("freebsd"),versionRegexes:[]}],de={browsers:r(fe),oses:r(le)},me=i(function(n){var t=de.browsers(),o=de.oses(),i=function(e,n){return T(e,n).map((function(e){var r=K(e.versionRegexes,n);return{current:e.name,version:r}}))}(t,n).fold(ee,ne),u=function(e,n){return T(e,n).map((function(e){var r=K(e.versionRegexes,n);return{current:e.name,version:r}}))}(o,n).fold(ce,se);return{browser:i,os:u,deviceType:function(e,n,t,o){var i=e.isiOS()&&!0===/ipad/i.test(t),u=e.isiOS()&&!i,c=e.isiOS()||e.isAndroid(),s=c||o("(pointer:coarse)"),a=i||!u&&c&&o("(min-device-width:768px)"),f=u||c&&!a,l=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(t),d=!f&&!a&&!l;return{isiPad:r(i),isiPhone:r(u),isTablet:r(a),isPhone:r(f),isTouch:r(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:r(l),isDesktop:r(d)}}(u,i,n,(function(n){return e.window.matchMedia(n).matches}))}}(e.navigator.userAgent)),ve=z,he=q,ge=(b().browser.isIE(),function(e){return v(e.dom().childNodes,B.fromDom)}),pe=(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}("element","offset"),function(e,n){return{left:r(e),top:r(n),translate:function(r,t){return pe(e+r,n+t)}}}),we=pe,ye=(b().browser.isSafari(),function(e,n){e.fire("FullscreenStateChanged",{state:n})}),Se=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ee=tinymce.util.Tools.resolve("tinymce.Env"),Oe=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ne="data-ephox-mobile-fullscreen-style",Te="position:absolute!important;",xe="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",be=Ee.os.isAndroid(),Ce=function(n,r){function t(e){return function(n){var r=S(n,"style"),t=void 0===r?"no-styles":r.trim();t!==e&&(y(n,Ne,t),y(n,"style",e))}}var o=function(e){return function(e){return g(function(e,n){for(var r=H(n)?n:c,t=e.dom(),o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=B.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(e,void 0),(function(e){return C(e,"*")}))}(e)}(n),i=function(e){return function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!k(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);U.apply(n,e[r])}return n}(v(e,(function(e){return function(e,n){return function(e,n){return g(function(e){return function(e){return L.from(e.dom().parentNode).map(B.fromDom)}(e).map(ge).map((function(n){return g(n,(function(n){return!function(e,n){return e.dom()===n.dom()}(e,n)}))})).getOr([])}(e),n)}(e,(function(e){return C(e,n)}))}(e,"*:not(.tox-silver-sink)")})))}(o),u=function(n){var r=function(n,r){var t=n.dom(),o=e.window.getComputedStyle(t).getPropertyValue(r),i=""!==o||function(e){var n=Y(e)?e.dom().parentNode:e.dom();return null!=n&&n.ownerDocument.body.contains(n)}(n)?o:function(e,n){return w(e)?e.style.getPropertyValue(n):""}(t,r);return null===i?void 0:i}(n,"background-color");return void 0!==r&&""!==r?"background-color:"+r+"!important":"background-color:rgb(255,255,255)!important;"}(r);h(i,t("display:none!important;")),h(o,t(Te+xe+u)),t((!0===be?"":Te)+xe+u)(n)},Ae=Se.DOM,De=e.window.visualViewport,Me=void 0===De?{bind:n,unbind:n}:(F=function(){var e=i(L.none());return{clear:function(){e.set(L.none())},set:function(n){e.set(L.some(n))},isSet:function(){return e.get().isSome()},on:function(n){e.get().each(n)}}}(),_=Oe.throttle((function(){e.document.body.scrollTop=0,e.document.documentElement.scrollTop=0,e.window.requestAnimationFrame((function(){F.on((function(n){return function(n,r){var t=n.dom();!function(e,n){for(var r=V(e),t=0,o=r.length;t<o;t++){var i=r[t];n(e[i],i)}}(r,(function(n,r){!function(n,r,t){if(!P(t))throw e.console.error("Invalid call to CSS.set. Property ",r,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);w(n)&&n.style.setProperty(r,t)}(t,r,n)}))}(n,{top:De.offsetTop+"px",left:De.offsetLeft+"px",height:De.height+"px",width:De.width+"px"})}))}))}),50),{bind:function(e){F.set(e),_(),De.addEventListener("resize",_),De.addEventListener("scroll",_)},unbind:function(){F.on((function(){De.removeEventListener("scroll",_),De.removeEventListener("resize",_)})),F.clear()}}),Fe=function(n,r){var t,o,i,u=e.document.body,c=e.document.documentElement;o=n.getContainer();var s=B.fromDom(o),a=r.get(),f=B.fromDom(n.getBody()),l=Ee.deviceType.isTouch();if(t=o.style,i=n.getContentAreaContainer().firstChild.style,a)i.width=a.iframeWidth,i.height=a.iframeHeight,t.width=a.containerWidth,t.height=a.containerHeight,t.top=a.containerTop,t.left=a.containerLeft,l&&function(){var n=function(n){return function(n){var r=e.document;return function(e){return e.nodeType!==ve&&e.nodeType!==he||0===e.childElementCount}(r)?[]:v(r.querySelectorAll(n),B.fromDom)}(n)}("["+Ne+"]");h(n,(function(e){var n=S(e,Ne);"no-styles"!==n?y(e,"style",n):E(e,"style"),E(e,Ne)}))}(),Ae.removeClass(u,"tox-fullscreen"),Ae.removeClass(c,"tox-fullscreen"),Ae.removeClass(o,"tox-fullscreen"),function(n){e.window.scrollTo(n.x,n.y)}(a.scrollPos),r.set(null),ye(n,!1),Me.unbind(),n.off("remove",Me.unbind);else{var d={scrollPos:function(){var n=function(n){var r=void 0===n?e.window:n,t=r.document,o=function(n){var r=void 0!==n?n.dom():e.document,t=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop;return we(t,o)}(B.fromDom(t)),i=r.visualViewport;if(void 0!==i)return A(Math.max(i.pageLeft,o.left()),Math.max(i.pageTop,o.top()),i.width,i.height);var u=t.documentElement,c=u.clientWidth,s=u.clientHeight;return A(o.left(),o.top(),c,s)}(e.window);return{x:n.x(),y:n.y()}}(),containerWidth:t.width,containerHeight:t.height,containerTop:t.top,containerLeft:t.left,iframeWidth:i.width,iframeHeight:i.height};l&&Ce(s,f),i.width=i.height="100%",t.width=t.height="",Ae.addClass(u,"tox-fullscreen"),Ae.addClass(c,"tox-fullscreen"),Ae.addClass(o,"tox-fullscreen"),Me.bind(s),n.on("remove",Me.unbind),r.set(d),ye(n,!0)}};u.add("fullscreen",(function(e){var n=i(null);return e.settings.inline||(function(e,n){e.addCommand("mceFullScreen",(function(){Fe(e,n)}))}(e,n),function(e,n){e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:D(e,n)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:D(e,n)})}(e,n),e.addShortcut("Meta+Shift+F","","mceFullScreen")),function(e){return{isFullscreen:function(){return null!==e.get()}}}(n)}))}(window);