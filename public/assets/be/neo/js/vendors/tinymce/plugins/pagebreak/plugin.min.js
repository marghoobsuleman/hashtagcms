!function(){"use strict";function e(){return'<img src="'+a.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'}var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.Env"),t=function(e){return e.getParam("pagebreak_split_block",!1)},r=e;n.add("pagebreak",(function(n){(function(e){e.addCommand("mcePageBreak",(function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+r()+"</p>"):e.insertContent(r())}))})(n),function(e){e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:function(){return e.execCommand("mcePageBreak")}}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:function(){return e.execCommand("mcePageBreak")}})}(n),function(n){var a=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")}(n),r=new RegExp(a.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(function(e){return"\\"+e})),"gi");n.on("BeforeSetContent",(function(n){n.content=n.content.replace(r,e())})),n.on("PreInit",(function(){n.serializer.addNodeFilter("img",(function(e){for(var r,o,c=e.length;c--;)if((o=(r=e[c]).attr("class"))&&-1!==o.indexOf("mce-pagebreak")){var i=r.parent;if(n.schema.getBlockElements()[i.name]&&t(n)){i.type=3,i.value=a,i.raw=!0,r.remove();continue}r.type=3,r.value=a,r.raw=!0}}))}))}(n),function(e){e.on("ResolveName",(function(n){"IMG"===n.target.nodeName&&e.dom.hasClass(n.target,"mce-pagebreak")&&(n.name="pagebreak")}))}(n)}))}();